init_jacobi out A[M][N], B[M][N]
{
  par i in 0:M-1
   par j in 0:N-1{
    A[i][j] = (((((float)i)*(((float)j)+2.0))+2.0)/((float)N))
    B[i][j] = (((((float)i)*(((float)j)+3.0))+3.0)/((float)N))
   }
}where M==N

jacobi in M, N, TSTEPS out A[M][N], B[M][N]
{
 (A, B) = init_jacobi()
 par t in 0:TSTEPS-1{
  for i in 1:M-1
   for j in 1:N-1
    B[i][j] = 0.2*(A[i][j]+A[i][j-1]+A[i][j+1]+A[i-1][j])
  par i in 1:M-1
  par j in 1:N-1
    A[i,j] = B[i,j]
 }
}where M==N && M==TSTEPS				     
							     
main							     
{							     
 var TSTEPS=100
 var N = 100						     
 var M=100						     
 int ret = extern start_timer()
 (var J1[M,N], var J2[M,N]) = jacobi (M,N,TSTEPS)
 ret = extern print_time()
 
 /* print the arrays */
 /* ret = extern print_float_array2 (M,N,J1) */
 /* ret = extern print_float_array2 (M,N,J2) */
 /* int ret = extern print_float_array2 (M,N,S) */
}							     
