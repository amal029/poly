Program [(DeclareEntry (Procedure "entry"[(Array "y"(Aggregate [432, 720] Int8))] [(Array "histogram"(Aggregate [256] Int32))](Block [(Declare (Array "buffer"(Aggregate [256] Int32))),(Par (Variable "_L256_buffer"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "_L256_buffer"))(Ref (Constant "255")))(Assign (VariableRef "_L256_buffer")(Binop "+"(Ref (VariableRef "_L256_buffer"))(Ref (Constant "1"))))(Block [(Assign (DynamicArrayRef "buffer"(DynamicIndex [(Binop "%"(Ref (VariableRef "_L256_buffer"))(Ref (Constant "256")))]))(Ref (Constant "0")))])),(For (Variable "i"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "i"))(Ref (Constant "1")))(Assign (VariableRef "i")(Binop "+"(Ref (VariableRef "i"))(Ref (Constant "1"))))(Block [(For (Variable "j"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "j"))(Ref (Constant "1")))(Assign (VariableRef "j")(Binop "+"(Ref (VariableRef "j"))(Ref (Constant "1"))))(Block [(Declare (Array "loop_local"(Aggregate [256] Int32))),(Par (Variable "_L256_loop_local"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "_L256_loop_local"))(Ref (Constant "255")))(Assign (VariableRef "_L256_loop_local")(Binop "+"(Ref (VariableRef "_L256_loop_local"))(Ref (Constant "1"))))(Block [(Assign (DynamicArrayRef "loop_local"(DynamicIndex [(Binop "%"(Ref (VariableRef "_L256_loop_local"))(Ref (Constant "256")))]))(Ref (Constant "0")))])),(Declare (Array "localbuf"(Aggregate [216, 360] Int8))),(For (Variable "k"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "k"))(Ref (Constant "215")))(Assign (VariableRef "k")(Binop "+"(Ref (VariableRef "k"))(Ref (Constant "1"))))(Block [(For (Variable "l"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "l"))(Ref (Constant "359")))(Assign (VariableRef "l")(Binop "+"(Ref (VariableRef "l"))(Ref (Constant "1"))))(Block [(Assign (DynamicArrayRef "localbuf"(DynamicIndex [(Ref (VariableRef "k")), (Ref (VariableRef "l"))]))(Ref (DynamicArrayRef "y"(DynamicIndex [(Binop "+"(Binop "*"(Ref (VariableRef "i"))(Ref (Constant "216")))(Ref (VariableRef "k"))), (Binop "+"(Binop "*"(Ref (VariableRef "j"))(Ref (Constant "360")))(Ref (VariableRef "l")))]))))]))])),(CallFun "hist"[(VariableRef "localbuf")][(VariableRef "loop_local")]),(CallFun "merge_hist"[(VariableRef "loop_local"), (VariableRef "buffer")][(VariableRef "buffer")])]))])),(Par (Variable "_L256_histogram"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "_L256_histogram"))(Ref (Constant "255")))(Assign (VariableRef "_L256_histogram")(Binop "+"(Ref (VariableRef "_L256_histogram"))(Ref (Constant "1"))))(Block [(Assign (DynamicArrayRef "histogram"(DynamicIndex [(Binop "%"(Ref (VariableRef "_L256_histogram"))(Ref (Constant "256")))]))(Ref (DynamicArrayRef "buffer"(DynamicIndex [(Binop "%"(Ref (VariableRef "_L256_histogram"))(Ref (Constant "256")))]))))]))]))),(DeclareFun (Procedure "merge_hist"[(Array "first"(Aggregate [256] Int32)), (Array "second"(Aggregate [256] Int32))] [(Array "result"(Aggregate [256] Int32))](Block [(Par (Variable "_L256_result"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "_L256_result"))(Ref (Constant "255")))(Assign (VariableRef "_L256_result")(Binop "+"(Ref (VariableRef "_L256_result"))(Ref (Constant "1"))))(Block [(Assign (DynamicArrayRef "result"(DynamicIndex [(Binop "%"(Ref (VariableRef "_L256_result"))(Ref (Constant "256")))]))(Binop "+"(Ref (DynamicArrayRef "first"(DynamicIndex [(Binop "%"(Ref (VariableRef "_L256_result"))(Ref (Constant "256")))])))(Ref (DynamicArrayRef "second"(DynamicIndex [(Binop "%"(Ref (VariableRef "_L256_result"))(Ref (Constant "256")))])))))]))]))),(DeclareFun (Procedure "hist"[(Array "y"(Aggregate [216, 360] Int8))] [(Array "histogram"(Aggregate [256] Int32))](Block [(For (Variable "i"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "i"))(Ref (Constant "215")))(Assign (VariableRef "i")(Binop "+"(Ref (VariableRef "i"))(Ref (Constant "1"))))(Block [(For (Variable "j"Int32s)(Ref (Constant "0"))(RBinop "<="(Ref (VariableRef "j"))(Ref (Constant "319")))(Assign (VariableRef "j")(Binop "+"(Ref (VariableRef "j"))(Ref (Constant "1"))))(Block [(DeclareAndAssign (Variable "val"Int8)(Ref (DynamicArrayRef "y"(DynamicIndex [(Ref (VariableRef "i")), (Ref (VariableRef "j"))])))),(Assign (DynamicArrayRef "histogram"(DynamicIndex [(Ref (VariableRef "val"))]))(Binop "+"(Ref (DynamicArrayRef "histogram"(DynamicIndex [(Ref (VariableRef "val"))])))(Ref (Constant "1"))))]))]))])))]
